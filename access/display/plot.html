<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Zugriffe</title>
    <link href="layout.css" rel="stylesheet" type="text/css">
    <script language="javascript" type="text/javascript" src="js/jquery.js"></script>
    <script language="javascript" type="text/javascript" src="js/jquery.flot.js"></script>
 </head>
    <body>
    <h1></h1>

    <div id="placeholder" style="width:100%;height:600px;"></div>

	<script type="text/javascript">
		$(function () {
			"use strict";
			var options = {
				lines: { show: true },
				xaxis: { mode: "time" } 
			};

			$.ajax({
				url: "json.json",
				method: 'GET',
				dataType: 'json',
				success: function onDataReceived(data) {
					var series = [], dailySeries = [];

					for(var client in data){
						series.push({
							label: client,
							data: data[client].map(function(time, iter){ 
								return [time, +iter];
							})
						});
						
						var o = {};
						data[client].forEach(function(time){
							var d = new Date(time);
//							console.log(d.getFullYear(), d.getMonth() + 1, d.getDate())
							var day = +new Date(d.getFullYear(), d.getMonth() + 1, d.getDate()); 
//							console.log(day)
							o[day] = o[day] || 0;
							o[day]++;
						});
						
						var dailyData=[];
						for (var day in o){
							dailyData.push([day, o[day]])
						}
							
							
						dailySeries.push({
							label: client,
							data: dailyData
						});
					}
console.log(dailySeries)
					$.plot($("#placeholder"), dailySeries, options);
				}
			});
		});
	</script>

</body>
</html>
